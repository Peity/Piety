// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Player {
  id              Int             @id @default(autoincrement())
  username        String          @unique
  email           String          @unique
  password        String
  created_at      DateTime        @default(now())
  clan            Clan?
}

model Clan {
  id              Int             @id @default(autoincrement())
  owner           Player          @relation(fields: [owner_id], references: [id])
  owner_id        Int
  name            String          @unique
  slug            String          @unique
  gold            Int
  supply          Int
  level           Float
  members         Member[]
}

model Member {
  id              Int             @id @default(autoincrement())
  Clan            Clan            @relation(fields: [clan_id], references: [id])
  clan_id         Int
  name            String          @db.VarChar(20)
  type            Int
  hired_at        DateTime        @default(now())
  state           Int             @default(0)
  revenue         Int
  task            Task?
}

model Task {
  id              Int             @id @default(autoincrement())
  member          Member          @relation(fields: [member_id], references: [id])
  member_id       Int
  type            Int
  start_time      DateTime        @default(now())
}

model Expedition{
  id              Int             @id @default(autoincrement())
  title           String          @db.VarChar(20)
  difficulty      Int
  min_req         Int
  chance          Int
  loot            Json
}
