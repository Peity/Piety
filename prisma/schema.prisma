// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Player {
  id              Int             @id @default(autoincrement())
  username        String          @unique
  email           String          @unique
  password        String
  created_at      DateTime        @default(now())
  clan            Clan?
}

model Clan {
  id              Int             @id @default(autoincrement())
  owner           Player          @relation(fields: [owner_id], references: [id])
  owner_id        Int             @unique
  name            String          @unique
  slug            String          @unique
  gold            Int
  supply          Int
  level           Float
  members         Member[]
}

model Member {
  id              Int             @id @default(autoincrement())
  Clan            Clan            @relation(fields: [clan_id], references: [id])
  clan_id         Int
  name            String          @db.VarChar(20)
  type            Int
  hired_at        DateTime        @default(now())
  state           Int             @default(0)
  life_status     Boolean         @default(true)
  revenue         Int             @default(0)
  Mining          Miner?
  Exploring       Explorer?
}

model Miner {
  id              Int             @id @default(autoincrement())
  member          Member          @relation(fields: [member_id], references: [id])
  member_id       Int
  start_time      DateTime        @default(now())
}

model Explorer {
  id              Int             @id @default(autoincrement())
  member          Member          @relation(fields: [member_id], references: [id])
  member_id       Int
  Expedition      Expedition      @relation(fields: [expedition_id], references: [id])
  expedition_id   Int
}

model Expedition {
  id              Int             @id @default(autoincrement())
  title           String          @db.VarChar(20)
  difficulty      Int
  min_req         Int
  chance          Int
  loot            Json
  explorers       Explorer[]
}

model MemberTypeTranslation {
  id              Int              @id @default(autoincrement())
  translation     String
}

model MemberStateTranslation {
  id              Int               @id @default(autoincrement())
  translation     String
}
